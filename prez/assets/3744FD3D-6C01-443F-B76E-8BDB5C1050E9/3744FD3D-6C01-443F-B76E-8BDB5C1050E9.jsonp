local_slide( {"name":"3744FD3D-6C01-443F-B76E-8BDB5C1050E9","json":{"assets":{"E648F82A68A5235933377357BA0E500F":{"type":"texture","index":0,"assetRequest":{"type":"slide","state":"contents","slide":"none"},"url":{"native":"assets\/3744FD3D-6C01-443F-B76E-8BDB5C1050E9.pdf"},"width":1024,"height":768},"C0EEEFF4B805E5D2EEB64957867C01C4":{"type":"texture","index":1,"assetRequest":{"type":"slide","state":"contents","slide":"none"},"url":{"native":"assets\/3744FD3D-6C01-443F-B76E-8BDB5C1050E9.pdf"},"width":1024,"height":768}},"events":[{"effects":[{"beginTime":0,"baseLayer":{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":512,"pointY":384},"width":1024,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":768,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"objectID":"0","layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":512,"pointY":384},"width":1024,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,-0.00049229876906403734,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":768,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"layers":[],"texturedRectangle":{"isBackgroundTexture":false,"singleTextureOpacity":1,"textureType":0,"textBaseline":0,"textXHeight":0,"isVerticalText":false},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":512,"pointY":384},"width":1024,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":768,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"C0EEEFF4B805E5D2EEB64957867C01C4"},{"animations":[{"timeOffset":0,"from":{"scalar":false},"beginTime":0,"repeatCount":0,"fillMode":"both","property":"hidden","autoreverses":false,"duration":0.01,"to":{"scalar":true}}],"layers":[],"texturedRectangle":{"isBackgroundTexture":false,"singleTextureOpacity":1,"textureType":0,"textBaseline":0,"textXHeight":0,"isVerticalText":false},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":512,"pointY":384},"width":1024,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":768,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"E648F82A68A5235933377357BA0E500F"}]}]},"effects":[],"duration":0.01,"type":"transition","attributes":{"direction":0},"name":"none","objectID":"0"}],"automaticPlay":false,"hyperlinks":[],"accessibility":[{"text":"6. Внутреннее устройство поисковых методов","targetRectangle":{"y":31.000000000000004,"x":141.47199999999998,"width":741.05600000000004,"height":38.07177734375}},{"text":"Несмотря на схожесть в синтаксисе, поисковые методы get* и querySelector* внутри устроены очень по-разному.","targetRectangle":{"y":97.91387939453125,"x":79,"width":864.35195999999917,"height":18}},{"text":"document.getElementById(id)","targetRectangle":{"y":116.34395751953124,"x":79,"width":216.94464000000005,"height":17.554453125000009}},{"text":"Браузер поддерживает у себя внутреннее соответствие id -> элемент. Поэтому нужный элемент возвращается сразу. Это очень быстро.","targetRectangle":{"y":134.34395751953127,"x":79,"width":840.24821999999972,"height":36}},{"text":"elem.querySelector(query), elem.querySelectorAll(query)","targetRectangle":{"y":170.77403564453127,"x":79,"width":412.06271999999984,"height":17.554453125000009}},{"text":"Чтобы найти элементы, удовлетворяющие поисковому запросу, браузер не использует никаких сложных структур данных.","targetRectangle":{"y":188.77403564453127,"x":79,"width":841.40544,"height":35.569921875000006}},{"text":"Он просто перебирает все подэлементы внутри элемента elem(или по всему документу, если вызов в контексте документа) и проверяет каждый элемент на соответствие запросу query.","targetRectangle":{"y":224.77403564453127,"x":79,"width":824.34359999999992,"height":36.430078124999994}},{"text":"Вызов querySelector прекращает перебор после первого же найденного элемента, а querySelectorAll собирает найденные элементы в «псевдомассив»: внутреннюю структуру данных, по сути аналогичную массиву JavaScript.","targetRectangle":{"y":261.63419189453123,"x":79,"width":866.92565999999999,"height":36}},{"text":"Этот перебор происходит очень быстро, так как осуществляется непосредственно движком браузера, а не JavaScript-кодом.","targetRectangle":{"y":298.06427001953125,"x":79,"width":789.21216000000004,"height":35.569921874999977}},{"text":"Оптимизации:","targetRectangle":{"y":334.06427001953125,"x":79,"width":101.52959999999996,"height":17.569921874999977}},{"text":"\\tВ случае поиска по ID: elem.querySelector('#id'), большинство браузеров оптимизируют поиск, используя вызов getElementById.","targetRectangle":{"y":352.06427001953125,"x":113.9999994635582,"width":827.92510053644173,"height":36.430078125000023}},{"text":"\\tПоследние результаты поиска сохраняются в кеше. Но это до тех пор, пока документ как-нибудь не изменится.","targetRectangle":{"y":388.9244262695313,"x":113.9999994635582,"width":818.07520053644168,"height":17.569921874999977}},{"text":"elem.getElementsBy*(…)","targetRectangle":{"y":406.9244262695313,"x":79,"width":181.10975999999994,"height":17.554453125000009}},{"text":"Результаты поиска getElementsBy* – живые! При изменении документа – изменяется и результат запроса.","targetRectangle":{"y":424.9244262695313,"x":79,"width":793.76964000000009,"height":18}},{"text":"Способ Firefox","targetRectangle":{"y":461.35450439453132,"x":79,"width":111.85151999999999,"height":17.554453125000009}},{"text":"Перебрать подэлементы document.body в порядке их появления в поддереве. Запоминать все найденные элементы во внутренней структуре данных, чтобы при повторном обращении обойтись без поиска.","targetRectangle":{"y":479.35450439453132,"x":79,"width":862.56629999999996,"height":36}},{"text":"Разбор действий браузера при выполнении кода выше:","targetRectangle":{"y":515.78458251953134,"x":79,"width":404.42879999999997,"height":17.569921874999977}},{"text":"Браузер создаёт пустую «живую коллекцию» elems. Пока ничего не ищет.","targetRectangle":{"y":533.78458251953134,"x":113.9999994635582,"width":543.51750000000004,"height":18}},{"text":"Перебирает элементы, пока не найдёт первый div. Запоминает его и возвращает.","targetRectangle":{"y":552.21466064453136,"x":113.9999994635582,"width":600.82409999999982,"height":18}},{"text":"Перебирает элементы дальше, пока не найдёт элемент с индексом 995. Запоминает все найденные.","targetRectangle":{"y":570.64473876953139,"x":113.9999994635582,"width":732.90473999999995,"height":18}},{"text":"Возвращает ранее запомненный элемент с индексом 500, без дополнительного поиска!","targetRectangle":{"y":589.07481689453141,"x":113.9999994635582,"width":643.09482000000003,"height":18}},{"text":"Продолжает обход поддерева с элемента, на котором остановился (995) и до конца. Запоминает найденные элементы и возвращает их количество.","targetRectangle":{"y":607.50489501953143,"x":113.9999994635582,"width":797.43209999999976,"height":36}}],"baseLayer":{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":512,"pointY":384},"width":1024,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":768,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"objectID":"0","layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":512,"pointY":384},"width":1024,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,-0.00049229876906403734,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":768,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"layers":[],"texturedRectangle":{"isBackgroundTexture":false,"singleTextureOpacity":1,"textureType":0,"textBaseline":0,"textXHeight":0,"isVerticalText":false},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":512,"pointY":384},"width":1024,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":768,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"E648F82A68A5235933377357BA0E500F"}]}]}}]}} )